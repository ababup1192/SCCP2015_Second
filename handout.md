# 課外プロジェクト 2015 実践的プログラミング I
2015 10/22 渡部未来

## 1.1 演習の目的
普段使っているワークステーションに**Git**環境を構築し、
Gitを実際に試してみよう。また、簡単なコーディング問題を通して、Gitによるソースコード管理の大切さを知ろう。

## 1.2 演習の目標
- Gitの導入
- プログラムのGit管理
- プログラミング言語Rubyの紹介

## 2 シェルのカスタマイズ
開発を行うときには、ターミナルによる操作が多くなる。
また、開発だけでなく会津大生が普段を過ごす上でも使用は必須である。
シェルを整備するだけで作業の効率が何倍にも増すので、
今回はシェルのカスタマイズの基本を紹介する。

### 2.1 ログインシェルの設定
もし、ログインするときのシェルがcshの場合は
以下のコマンドで変更をすることができる。今回は説明を統一するために*bash*を選ぼう。

    $ chsh

*chsh*コマンドでは、以下のように現在のシェルのパスと
新しいシェルのパスの候補が聞かれるので、bashのパスを打ち込もう。
打ち込んだあとに、ログインパスワードが聞かれるので入力すると、次回以降bashでログインすることができる。

    Old Shell: /usr/bin/csh
    New Shell [ /bin/sh /bin/csh /usr/local/bin/tcsh /usr/local/gnu/bin/bash ]:

##  2.2 alias
bashの設定を変更するには、ホームディレクトリの.bashrcを変更しよう。
ファイルの最後に以下の内容を追記しよう。

    # lsを視覚的にわかりやすくする。
    if [ `uname` = "Darwin" ]; then
        alias ls='ls -FGH'
    elif [ `uname` = "SunOS" ]; then
        alias ls='ls -F --color'
    fi

普段*ls*を打つときは、カレントディレクトリのファイル情報が表示されるが、
視覚的にファイル・ディレクトリ・実行ファイル・シンボリックリンクの見分けが付くように
オプションを付けている。オプションの指定がMac端末とSolaris端末で違うので条件分岐をしている。

## 2.3 プロファイルの再読み込み
2.2の変更は、bashrcに変更を加えただけでは反映はされない。
反映させるには、以下のコマンドを打てば反映される。

    $ source ~/.bashrc

これで色が付いていれば、無事成功だ。

## 2.4 プロンプト
*cd*をするたびに、自分の位置を確認するために*pwd*をタイプしていないだろうか？
頻繁に行っているならば、大きなタイムロスになってしまう。
その場合には、プロンプトにカレントディレクトリを表示するほうが良い。
以下の内容をbashrcに追記すると良い。
※ bashでは、=の後に空白を入れるとエラーになるため気をつける。

    # プロンプトにカレントディレクトリを表示
    export PS1='[ \w ] $ '

\wという記号がカレントディレクトリを表示してくれる。残りの記号はお飾りなので、好みで変更して良い。
変更が行えたら、2.3 プロファイルの再読み込みで変更を反映する。

## 2.5 まとめ
この章では、普段一番触る機会が多いターミナルシェルの拡張の基本に触れた。
環境をカスタマイズするときには、頻繁に触るものほど効果は絶大だ。
さらに効率を求める場合には、エディタ(emacs, vim)の拡張などをしてみると良いだろう。

## 3 Git
Gitはソースコードに限らずファイルの変更を管理するためのツールである。
Gitの解説はインターネット上で多く存在するので簡単に目を通してほしい。
以下に参考にするサイトの一覧を載せる。

- サルでもわかるGit入門 (http://www.backlog.jp/git-guide/)
- イラストでわかる！ git入門の入門 (http://blog.asial.co.jp/894)
- もっと早く知りたかった！ Gitが鬼のようにわかるスライド厳選7選 (http://www.find-job.net/startup/7-git-slides)
- 無料電子書籍 Pro Git (http://progit-ja.github.io) # かなり難解である。

## 3.1 Gitの導入
Gitの概要がわかったところで学校の環境にGitを導入しよう。
現在多くの環境では初期から*git*コマンドが使えるようになっている。
しかし残念なことに学校の環境では、gitコマンドが使えないため、ソースコードを取得し
make、コマンドパスを通すことでGitを導入する。

    # ホームディレクトリに、独自でコマンドを入れるためのディレクトリを作る。
    $ cd $HOME && mkdir local && cd local
    # 直接Gitのページから取得してもよい。 https://git-scm.com
    # Solaris環境では、2.x 系のバージョンはmakeに失敗した。
    $ wget https://www.kernel.org/pub/software/scm/git/git-1.9.5.tar.gz
    $  tar xvf git-1.9.5.tar.gz
    $ cd git-1.9.5
    $ ./configure
    # それなりに時間が掛かるのでGitの概要を勉強して待とう。
    $ make

以上の作業が終了したらbashrcを編集して、*$HOME/local/git-1.9.5*に
パスを通そう。もし、パスの通し方を忘れた場合はリテラシーのハンドアウトや
ネットで調べて確実に覚えておこう！(最重要！)

## 3.2 Gitの練習
*git* とターミナルにタイプし、正しく導入ができたらgitを練習してみよう。
最初にgitの初期設定を以下のように行う。

    # gitの変更履歴に残すための名前。自由で良い。
    $ git config --global user.name "ユーザ名"
    # Slack登録時のメールアドレスなどが良い。
    $ git config --global user.email "メールアドレス"
    # vim・emacsなどの好きなエディタを設定。
    $ git config --global core.editor "vim or emacs"

Gitの練習には、「Gitをはじめからていねいに」(https://github.com/takanabe/introduction-to-git)というページを使うとよい(このページもGitで管理されている)。
最初は、1~4 ひとりでつかう - どんどんコミット くらいまでやると良い。

## 3.3 Github(課題)
Gitをローカルリポジトリで扱うだけでは、Gitの恩恵を半分以下にしてしまう。
リモートリポジトリ(外部サーバー)を使うことで、
ソースコードが失われるリスクを減らし、他人とのソースコード共有ができるようにしよう。
リモートリポジトリを提供するサービスは以下の２つがある。

  - Github (https://github.com)
  - Bitbucket (https://bitbucket.org)

GithubはGitを扱うサービスで一番有名なサービスで、多くの企業やエンジニアが利用している。
プログラミングを勉強するときに、他人のソースコードを参考にするときはGithubを使うと良いだろう。
このSCCPでもGithubを積極的に利用するのでアカウントを取得しよう。
Githubはリポジトリを基本的に公開するようになっている。
授業の課題などをGitで管理するときには、リポジトリの非公開を無料でおこなえるBitbucketを利用しよう。

### 3.3.1 Github SSHの設定
ローカルリポジトリとリモートリポジトリのやりとりは、セキュアに行われる必要がある。
Githubでは、https(SSL)とSSHの２つの手法を取っている。
今回は、SSHを使った手法で通信をおこなう。
SSHを行うための鍵(公開鍵と秘密鍵)を生成する。
途中パスフレーズを聞かれるがブランクで良い。

    $ ssh-keygen -t rsa

以下のディレクトリに移動すると公開鍵(id_rsa_2048_xxx.pub)
と秘密鍵(id_rsa_2048_xxx)が確認できると思う。

    $ cd ~/.ssh2
    $ ls -a (秘密鍵のパーミッションは閉じられている。)
    $ more id_rsa_2048_*.pub

Githubの設定ページ(トップ右上の自分のアイコンメニューからSettingのリンク)
へ飛びSSH keysを設定しよう。(間違っても秘密鍵を設定しないように！)
コメント類は削除し、ssh-rsa という文字列を文頭に付けてキーのみを貼り付けよう。
参考画像(https://github.com/ababup1192/SCCP2015_Second/blob/master/ssh_key_setting.png)

### 3.3.2 課題の報告
Githubに適当なローカルリポジトリをコミットし、
それができたらSlackへURLを貼ろう!(HTTPS経由にならないように)
